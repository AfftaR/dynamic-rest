{% load rest_framework %}
{% load dynamic_rest %}
{% if results %}
    <script>
        $(document).ready(function() {
            $('#results-table').cardtable();
        });
    </script>
    <table id="results-table" class="table">
      <thead>
        <tr>{% for column in columns%}<th>{{ column|format_key }}</th>{% endfor %}</tr>
      </thead>
      <tbody>
            {% for row in results %}
              <tr>
                {% for key in columns %}
                    <td {{ row|get_value_from_dict:key | add_nested_class }} >
                      {% if link_field == key %}
                          <a href="{{ row.url }}">
                              {{ row|get_value_from_dict:key | format_value }}
                          </a>
                      {% else %}
                          {{ row|get_value_from_dict:key | format_value }}
                      {% endif %}
                    </td>
                {% endfor %}
              </tr>
            {% endfor %}
      </tbody>
    </table>
{% else %}
    <div class="no-results">No results, try creating a new record.</div>
{% endif %}
